<!--Content start-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entry Task Shopee</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
        integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
        crossorigin="anonymous"></script>
</head>

<body>
    <main id="content">

        <div id="log_out_button" class="m-5">
            <form id="frmLogout" method="post">
                <div class="d-flex flex-row-reverse">
                    <button type="submit" class="btn btn-info mx-4 my-2">Log Out</button>
                </div>
            </form>
            <script>
                $("#frmLogout").submit(function (e) {
                    e.preventDefault(); // avoid to execute the actual submit of the form.
                    process_log_out();
                });
            </script>
        </div>


        <div id="LOG-IN-INFO" class="m-5">
            <div id="login_info" class="alert alert-success">
                Not Log In
            </div>
            <script>
                login_data = JSON.parse(localStorage.getItem("login_token"))
                console.log(login_data);
                if (login_data) {
                    $('#login_info').html(JSON.stringify(login_data));
                    $('#log_out_button').css("visibility", "visible");
                }
                else {
                    $('#log_out_button').css("visibility", "hidden");
                }
            </script>
        </div>

        <div class="container-fluid col-sm-12 align-middle" style="font-size:19px;">
            <div id="content" class="container mt-5  p-1 py-4 p-md-5 mb-5  bg-light shadow"
                style="background-color: rgb(255, 255, 255); ">

                <div id="info_message" class="alert alert-info">
                </div>
                <div id="error_message" class="alert alert-danger">
                </div>

                <div class="jumbotron py-4 mt-3 mb-4">
                    <!-- Tieu de + Premium-->
                    <h1 id="title" class="container">
                        <b>{{title}}</b>
                    </h1>
                    <!-- Tom tat -->
                    <div id="description" class="text-justify container">
                        {{description}}
                    </div>
                </div>

                <!-- Anh dai dien -->
                <div class="container">
                    <figure class="text-center">
                        <img id="image_url" class="figure-img img-fluid rounded" src="/img/img_1.png"
                            onerror="this.onerror=null; this.src='https://icon-library.com/images/no-picture-available-icon/no-picture-available-icon-1.jpg?fbclid=IwAR0dStJNBbQP1tBNIsH_JMQH1bAZyQe5HMyhXL_GixjL2WZP3T6QU2olS2c'">
                    </figure>
                </div>

                <div id="event_id" class="text-justify mx-5 my-5">
                    {{{id}}}
                </div>
                <hr>
                <div id="category" class="text-justify mx-5 my-5">
                    {{{category}}}
                </div>
                <hr>

                <div id="date" class="text-justify mx-5 my-5">
                    {{date}}
                </div>
                <hr>



                <div id="location" class="text-justify mx-5 my-5">
                    {{{category}}}
                </div>
                <hr>


            </div>


            <div class="container mb-5 mt-3 p-1 py-4 p-md-5 bg-light shadow"
                style="background-color: rgb(255, 255, 255); ">
                <!-- comments -->
                <div id="comment" class="container pb-3">
                    <h3 class="text-uppercase"> Likes </h3>
                    <h3 id="n_likes"></h3>
                </div>

                <!-- writecomment -->

                <form id="frmLike" method="post">
                    <div class="d-flex flex-row-reverse">
                        <button type="submit" class="btn btn-info mx-4 my-2">Send Like</button>
                    </div>
                </form>

                <form id="frmUnlike" method="post">
                    <div class="d-flex flex-row-reverse">
                        <button type="submit" class="btn btn-danger mx-4 my-2">Delete Like</button>
                    </div>
                </form>

                <hr>

                <div class="card bg-light shadow text-dark mx-md-5 mx-1 my-3 px-2" id="likes_tag">

                </div>

            </div>

            <div class="container mb-5 mt-3 p-1 py-4 p-md-5 bg-light shadow"
                style="background-color: rgb(255, 255, 255); ">
                <!-- comments -->
                <div id="comment" class="container pb-3">
                    <h3 class="text-uppercase"> Participants </h3>
                    <h3 id="n_participants"></h3>
                </div>

                <!-- writecomment -->

                <form id="frmParticipant" method="post" action="">
                    <div class="d-flex flex-row-reverse">
                        <button type="submit" class="btn btn-info mx-4 my-2">Participate in this event</button>
                    </div>
                </form>

                <form id="frmUnparticipant" method="post" action="">
                    <div class="d-flex flex-row-reverse">
                        <button type="submit" class="btn btn-danger mx-4 my-2">Not participate in this event</button>
                    </div>
                </form>

                <hr>

                <div class="card bg-light shadow text-dark mx-md-5 mx-1 my-3 px-2" id="participants_tag">

                </div>

            </div>

            <div class="container mb-5 mt-3 p-1 py-4 p-md-5 bg-light shadow"
                style="background-color: rgb(255, 255, 255); ">
                <!-- comments -->
                <div id="comment" class="container pb-3">
                    <h3 class="text-uppercase"> Comment </h3>
                    <h3 id="n_comments"></h3>
                </div>

                <!-- writecomment -->

                <form id="frmComment" method="post">

                    <div id="write_comment" class="container d-flex">
                        <i class="fa fa-comment px-2" style="font-size:48px;"></i>
                        <div class="input-group">
                            <textarea class="form-control" id="comment" name="comment_content"
                                aria-label="With textarea"></textarea>
                        </div>
                    </div>

                    <div class="d-flex flex-row-reverse">
                        <button type="submit" class="btn btn-info mx-4 my-2">Send Comment</button>
                    </div>
                </form>

                <hr>

                <div class="card bg-light shadow text-dark mx-md-5 mx-1 my-3 px-2" id="comment_tag">
                </div>

            </div>

        </div>

    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="./js/event.js"></script>
    <script>
        const queryString = window.location.search;
        console.log(queryString);
        const urlParams = new URLSearchParams(queryString);
        const event_id = parseInt(urlParams.get('id')) || 1;
        console.log("ID = " + event_id);
        loadEventContent(event_id);
        $("#frmComment").attr('action', "/app_api/post_add_comment_by_event_id?event_id=" + event_id);
    </script>
</body>